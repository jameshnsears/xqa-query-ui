sudo: required

notifications:
email: james.hn.sears@gmail.com

env:
  global:
    # travis encrypt COVERALLS_REPO_TOKEN=...
    - secure: "Spy1/amTNJ9wweOXpY/fpCm+bPovP6pK2Paby8RQd8qFYAY/pqnVwpu1D4eZ/ZsA5JA7NVe4UrXiEOnV51LSMj5DKgqu7SUFVKiUIwh3ZvLGXSmq7JNpLfjKVlfFow0I/QItD7uCo7AjYQ0Hg/Cs7EhI9L5hPTTAAmk2A7vEamIwOZU1m0Km+eW715+HKqD2Q4bfgSlK7vo8z1E/TjFtVFHA+sQdU8yi0/sKgwOh579tnD857zvO0HoxdTlamj3Cr6DT8f7JdnIULcFcoC81cy5DpujUWpgrkmc7lWtS0CcKJJ+TIADNN0bSG8MALc6jqG7CxpLcxEOwsFRe2t5slHe7S0f6ST+iihe7BVOyBv4MQQmK1OS+IF4aktkz62YfzSgTl+saVoJRo/vNGStN250IYfom+ePi8RODPtYfQwdCD1EqCsXgDSrodj7fLW+qhd+eqybxXfDAj3USvzhHjQmDVp6pFil2x+FDIDqW1y8rW5BaMuojowfKY0A1suu4k8TSvxSxyd+L0uI9xkr90b6XEJsK4BzofFmo/sR262s9JbJr3aAxEUHFJ1nwROaglefhAJCaie9iDTYdcthvKvNl+Iwj1+5WZQktOK8S4oCsXGwgjYZvCN1L2dk3Gjz/SzjpyHFv5TVdm1YZvAGMX3SHBhsx8kZYi0kz50lwbpw="
    # travis encrypt CODACY_PROJECT_TOKEN=...
    - secure: "CcW4zz5rJnlRGNJ+hmLjMftdU1011B9t0u1tJffPNZJnI9tNoDb0Hd4yTyiqj9VETU18uToOax5DR/RJKfgpwKORiVDpKk5ZI1CEYImdSsWcZTFG/EDqf4R/kG/13XtQLOtfbS9e429qloOy6YzYj8PkK2l695x0F+jnBtOE0On9nKQ3S/s9sy15+drkx+uzI2yc6ZdcsU3Gy3Xi3lUlAyLRAgGft7EWfhKzw2qPUh7VJvGzXK8pnSi6783F+3exKhrUzR4xYsSh4rj+aARuiMAh9cbY9Shz8pVZr/xflP5mw86e6FV5V9iCpm9a/6uuESpbW9uTJs6gp0uGWpilFhNwBzvTnlOn2ifqIs2HwqbhVBlYMtAJ5rHhqGyobm835kYl/9PDMlbfT/coXFJcMi5wQL5/PxOJwsw8Lagg3BLoWIVX7GeIb9z/llDv7c4AZaM2VXZ4tRP9fOz2Z47y8QW01T5sr3VM0VrzPXMjIf/PIKmBZfsmsK0w0Ue10vbRVGhQRw1VpJ5BOBMbYUsUbIMwJXAaknaLyoeCTmacou9KRVcVL3kEgbFInqEqnVJZxZEA4h+SlvTJLyXmZPEU9z++5gf24G95m+b5oulc9lDxzzqshPWCbm9iMLUgzEF+kbdCaVfM/6QWDdEK805l7D7J17bgNyq841JxCn8YX9E="

addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable
  sonarcloud:
    organization: "jameshnsears-github"
    token:
      secure: "lvzkmOCdGrOqpsgy0PgXY+hj/bG4wutluGXm4ZlXzUaNLdqhQo2utapz4H9G6zIm5+1LaDbSRU23pqpGMg0nz24L+QOs4UyEasuohW0b4FU9okvgX3QXKMiOc/14IwMhc0VaS9N+ea9rKPaOrlbkxDksz8rBhSm0AuRcwMGXsSSSm0+8vP8EEVtpBdy8wU2V5SRjhNsS9On80dy5NILdw6R5jcbl5kU9UogLw4NernlVJOVZqCUgocIK/IvqFxOUxaKho7xtF2I6y+QztJ87Tif7gBsavsni3kkrfBjAIL/w35X5gngMj/1ATDK/d/GDrr3lZMcGGdItgb4Xby9z80LLSR+5xbTbApo1Zu30tDOakK0kjw9dVLdxrxWSpzvT+8Nh8A0NWeSkGhRhh9XnRKFSiS4o2g4yg4YRlNDdxTfeGGsRseCX2kSMwtDP6SHa+UJY4L3WczwB/1XHkKIGwazA/fOwgf+B5OidVhz3eXVHEW7WQ+iZGkX/cDqoy9+0DHlqCVYYCVYsalpF5580Ems3Pt8yMPRaozDTPtZmU1e/BtyYAmZK8kkFKxeWOJ4OVlgtohfuUiUyyZe+A02eF2+0rL4X6xlTrwIV9G/Q88LURtX6tiqPPt1XeUPlF56K72ZOxUY5tetVmSlbP1S/FX/CWgpxYMjntw6LtZgCnJg="

git:
  depth: false

language: node_js

node_js:
  - "8"

cache:
  directories:
    - node_modules

before_script:
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - npm install
  - npm install typescript@">=3.1.1 <3.2"

script:
  - node_modules/@angular/cli/bin/ng lint
  - node_modules/@angular/cli/bin/ng test --code-coverage --watch false
  # - node_modules/@angular/cli/bin/ng e2e

  - node_modules/@angular/cli/bin/ng build --prod --build-optimizer

after_success:
  - npm install coveralls && cat ./coverage/lcov.info | coveralls
  - npm install codacy-coverage && cat ./coverage/lcov.info | codacy-coverage
  - sonar-scanner
 